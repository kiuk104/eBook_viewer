# 🧪 이북 뷰어 테스트 체크리스트

## 📋 필수 테스트 항목

### 1단계: 모듈 로딩 테스트
```
URL: http://localhost:8000/test_modules.html
```

**기대 결과:**
```
✅ HTML 로드 성공
✅ config.js 로드 성공
✅ utils.js 로드 성공
✅ settings.js 로드 성공
✅ BookmarkManager.js 로드 성공
✅ viewer.js 로드 성공
✅ google_drive.js 로드 성공
✅ main.js 로드 성공
🎉 모든 모듈 로드 성공!
```

**오류 발생 시:**
- [ ] 브라우저 콘솔(F12) 확인
- [ ] 파일 경로 확인
- [ ] 웹 서버에서 실행 중인지 확인

---

### 2단계: 메인 앱 로딩 테스트
```
URL: http://localhost:8000/ebook_viewer.html
```

**브라우저 콘솔 확인 (F12):**
```javascript
// 다음 메시지가 표시되어야 함:
✅ window.loadGoogleDriveFiles 할당 완료
✅ 모든 전역 함수 할당 완료
```

**테스트 방법:**
```javascript
// 콘솔에서 직접 확인
typeof window.toggleSettings           // "function"
typeof window.toggleBookmark           // "function"
typeof window.handleAIClean            // "function"
typeof window.downloadAsMarkdown       // "function"
typeof window.loadGoogleDriveFiles     // "function"
```

---

### 3단계: UI 버튼 테스트

#### 3-1. 상단 버튼
- [ ] **줄바꿈: 자동** 버튼 클릭
  - 기대: "줄바꿈: 원본(가로스크롤)" 으로 변경
  
- [ ] **⚙️ 설정** 버튼 클릭
  - 기대: 설정 패널이 아래로 펼쳐짐
  
- [ ] **📑 책갈피** 버튼 클릭
  - 기대: 반응 있음 (파일 열기 전이므로 알림 가능)
  
- [ ] **⭐ 즐겨찾기** 버튼 클릭
  - 기대: "즐겨찾기 기능은 곧 추가될 예정입니다." 알림

#### 3-2. 파일 업로드 영역
- [ ] **내 컴퓨터 파일** 버튼 클릭
  - 기대: 파일 선택 다이얼로그 열림
  
- [ ] **Google Drive** 버튼 클릭 (API 키 설정 전)
  - 기대: "Google Drive API 설정이 필요합니다." 알림
  - 기대: 설정 패널 자동으로 열림

#### 3-3. 설정 패널 내부
- [ ] **테마 선택** (라이트/다크/세피아/그린/커스텀)
  - 기대: 배경색 즉시 변경
  
- [ ] **글자 크기** 슬라이더
  - 기대: 슬라이더 움직임
  
- [ ] **줄 간격** 슬라이더
  - 기대: 슬라이더 움직임
  
- [ ] **Google Drive 저장** 버튼
  - 기대: "저장되었습니다" 알림 (값 입력 시)
  
- [ ] **Gemini API 키 저장** 버튼
  - 기대: "저장되었습니다" 알림 (값 입력 시)
  
- [ ] **📤 내보내기** 버튼
  - 기대: JSON 파일 다운로드
  
- [ ] **📥 불러오기** 버튼
  - 기대: 파일 선택 다이얼로그
  
- [ ] **🔄 모든 설정 초기화** 버튼
  - 기대: 확인 알림 → 페이지 새로고침

---

### 4단계: 파일 업로드 및 표시 테스트

#### 4-1. 텍스트 파일 업로드
```
1. 간단한 .txt 파일 준비 (test.txt)
2. "내 컴퓨터 파일" 버튼 클릭
3. test.txt 선택
```

**기대 결과:**
- [ ] 상단 패널이 자동으로 접힘
- [ ] 파일 내용이 화면에 표시됨
- [ ] "최근 읽은 파일" 목록에 추가됨

#### 4-2. 마크다운 파일 업로드
```
1. .md 파일 준비 (test.md)
2. 업로드
```

**기대 결과:**
- [ ] 마크다운이 렌더링되어 표시됨
- [ ] 제목이 크게 표시됨
- [ ] 링크가 클릭 가능

#### 4-3. 드래그 앤 드롭
```
1. .txt 또는 .md 파일을 업로드 박스로 드래그
2. 놓기
```

**기대 결과:**
- [ ] 파일 내용 표시

---

### 5단계: 고급 기능 테스트

#### 5-1. 북마크 기능
```
1. 파일 열기
2. 텍스트 선택 → 우클릭
3. "북마크 추가" 클릭
```

**기대 결과:**
- [ ] 우측 "북마크" 패널에 추가됨
- [ ] 북마크 클릭 시 해당 위치로 이동

#### 5-2. 컨텍스트 메뉴
```
1. 파일 내용에서 우클릭
```

**기대 결과:**
- [ ] 커스텀 컨텍스트 메뉴 표시
- [ ] 형광펜 색상 선택 가능
- [ ] "🔖 북마크 추가" 옵션 표시
- [ ] "⚙️ 뷰어 설정" 옵션 표시

#### 5-3. 💾 MD 저장 버튼
```
1. 파일 열기
2. "💾 MD 저장" 버튼 클릭
```

**기대 결과:**
- [ ] 마크다운 파일 다운로드
- [ ] 파일명: `원본파일명_cleaned.md`

#### 5-4. 🤖 AI 변환 (API 키 필요)
```
1. 설정에서 Gemini API 키 입력 및 저장
2. 파일 열기
3. "🤖 AI 변환 & 저장" 버튼 클릭
```

**기대 결과:**
- [ ] 확인 알림 표시
- [ ] 변환 진행 중 로그 (콘솔)
- [ ] 변환 완료 알림
- [ ] 화면에 변환된 내용 표시

---

### 6단계: Google Drive 연동 테스트 (API 키 필요)

#### 6-1. API 키 설정
```
1. ⚙️ 설정 버튼 클릭
2. Google Drive 섹션에 Client ID, API Key 입력
3. 저장 버튼 클릭
```

#### 6-2. Google Drive 파일 열기
```
1. "Google Drive" 버튼 클릭
2. Google 계정 로그인
3. 파일 목록에서 선택
```

**기대 결과:**
- [ ] 로그인 팝업 표시
- [ ] 파일 목록 다이얼로그 표시
- [ ] 파일 선택 시 내용 표시
- [ ] "최근 읽은 파일"에 Drive 아이콘과 함께 표시

---

## 🐛 일반적인 오류 및 해결

### 오류 1: "함수가 정의되지 않음"
```
Uncaught ReferenceError: toggleSettings is not defined
```

**해결:**
```javascript
// 브라우저 콘솔에서 확인
console.log(window.toggleSettings);  // function 이어야 함

// undefined인 경우:
// 1. Ctrl + Shift + R (강제 새로고침)
// 2. 브라우저 캐시 삭제
// 3. main.js가 로드되었는지 확인
```

### 오류 2: "모듈을 찾을 수 없음"
```
Failed to resolve module specifier "./modules/FileManager.js"
```

**해결:**
- [ ] 파일 경로 확인: `src/js/modules/FileManager.js`
- [ ] 대소문자 확인 (Linux 대소문자 구분)
- [ ] 웹 서버 실행 확인 (file:// 불가)

### 오류 3: CORS 오류
```
Access to script ... has been blocked by CORS policy
```

**해결:**
- [ ] file:// 대신 http://localhost 사용
- [ ] 웹 서버 실행: `python -m http.server 8000`

---

## ✅ 최종 확인

### 모든 테스트 통과 기준:
- [ ] ✅ test_modules.html - 모든 모듈 로드 성공
- [ ] ✅ 설정 버튼 작동
- [ ] ✅ Google Drive 버튼 반응 (알림 표시)
- [ ] ✅ 파일 업로드 및 표시
- [ ] ✅ 북마크 추가/삭제
- [ ] ✅ 컨텍스트 메뉴 표시
- [ ] ✅ MD 저장 기능
- [ ] ✅ 데이터 백업/복원

### 브라우저 호환성:
- [ ] Chrome/Edge (권장)
- [ ] Firefox
- [ ] Safari (부분 지원)

---

## 📞 문제 발생 시

1. **F12로 콘솔 확인**
2. **오류 메시지 복사**
3. **test_modules.html 확인**
4. **강제 새로고침 (Ctrl + Shift + R)**

---

**테스트 완료 일시:** _____________
**테스트 환경:** _____________
**브라우저:** _____________
**결과:** ✅ 통과 / ❌ 실패
